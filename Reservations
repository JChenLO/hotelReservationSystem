import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Date;
import java.util.Iterator;


public class Reservations {

	private ArrayList<Reservation> reservationList;
	
	public Reservations()
	{
		reservationList = new ArrayList<Reservation>();
	}
	
	public void add(Reservation r)
	{
		reservationList.add(r);
		
		// sort the list according to the start dates
		if(reservationList.size()>1){
		Collections.sort(reservationList,new Comparator<Reservation>(){
			public int compare(Reservation r1, Reservation r2)
			{
				if(r1.getStartDate().after(r2.getStartDate()))
				return  -1;
				else
				return 1;
			}});
		}
	}
	
	
	public void cancel(Reservation r)
	{
		
		reservationList.remove(r);
		
	}
	
	public Iterator<Reservation> getReservationByUser(int id)
	{
		ArrayList<Reservation> reservesUnderSameID = new ArrayList<Reservation>();
		for(Reservation re : reservationList)
		{
			if(re.getID()==id)
			{
				reservesUnderSameID.add(re);
			}
		}
		
		return reservesUnderSameID.iterator();
	}
	
	public Iterator<Reservation> getReservationByDate(Date date)
	{
		ArrayList<Reservation> reservesUnderSameDate = reservationList;
		for(Reservation re : reservationList)
		{
           if(re.getStartDate().after(date)||date.after(re.getendDate()))
           {
        	// iterate the reservation list, remove reservations that didn't contain this date 
        	   reservesUnderSameDate.remove(re);
           }
	}
		return reservesUnderSameDate.iterator();
}
}
